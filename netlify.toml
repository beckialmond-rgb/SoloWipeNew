[build]
  command = "npm run build"
  publish = "dist"

# Force HTTPS redirects for all HTTP traffic
[[redirects]]
  from = "http://solowipe.co.uk/*"
  to = "https://solowipe.co.uk/:splat"
  status = 301
  force = true

[[redirects]]
  from = "http://www.solowipe.co.uk/*"
  to = "https://solowipe.co.uk/:splat"
  status = 301
  force = true

# Redirect www to non-www (if you want)
[[redirects]]
  from = "https://www.solowipe.co.uk/*"
  to = "https://solowipe.co.uk/:splat"
  status = 301
  force = true

# SPA fallback - all routes (including /gocardless-callback) go to index.html
# This ensures the React router can handle the callback route
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
